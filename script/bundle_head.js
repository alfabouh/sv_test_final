(()=>{"use strict";var t={884:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.Submit=e.buildForm=void 0;const a=o(492),r=o(728),n=o(694);e.buildForm=function(){let t=$("<form>");t.attr("id","mainForm");let e=$("<input>");e.addClass("my-1"),e.attr("type","text"),e.attr("id","personData"),e.attr("placeholder","ФИО");let o=$("<input>");o.addClass("my-1"),o.attr("type","email"),o.attr("id","email"),o.attr("placeholder","Почта");let s=$("<input>");s.addClass("my-1"),s.attr("type","tel"),s.attr("id","phone"),s.attr("placeholder","Номер телефона");let l=$("<input>");l.addClass("my-1"),l.attr("type","text"),l.attr("id","organization"),l.attr("placeholder","Организация");let c=$("<textarea>");c.addClass("my-1"),c.attr("rows","4"),c.attr("id","msg"),c.attr("placeholder","Сообщение..."),c.css({resize:"none"});let p=$("<input>");p.attr("type","checkbox"),p.addClass("my-1"),p.attr("id","checkbox1");let d=$("<label>");d.text("Согласен с политикой конфиденциальности"),d.addClass("px-2 my-1"),d.attr("for","checkbox1");let u=$("<input>");u.attr("value","Отправить"),u.attr("type","submit"),u.addClass("my-1"),u.attr("id","submit1"),e.appendTo(t),o.appendTo(t),s.appendTo(t),l.appendTo(t),c.appendTo(t),p.appendTo(t),d.appendTo(t),t.append("<br>"),u.appendTo(t),t.on("submit",(t=>{t.preventDefault()}));const h=[e,o,s,l,c];return u.on("click",(()=>{let r=(0,a.onClickSubmit)(e,o,s,l,c,p),d=r.isSuccess?i.SUCCESS_CLASS:i.UNSUCCESS_CLASS;const u=$("<div>");if(u.addClass(d),u.attr("id","ANCHOR"),$("#ANCHOR").remove(),null!==r.getMSG){let e=$("<h5>");e.text(r.getMSG),e.appendTo(u),u.appendTo(t),r.isSuccess&&function(t){t.forEach((t=>{n.localStorage.removeItem(t.attr("id"))}))}(h)}})),function(t){t.forEach((t=>{t.val((0,r.ReadFrom)(n.localStorage,t.attr("id")))}))}(h),function(t){t.forEach((t=>{t.on("change",(()=>{(0,r.WriteIn)(n.localStorage,t.attr("id"),t.val())}))}))}(h),t};class i{constructor(t,e){this.message=e,this.success=t}static SUCCESS(t){return new i(!0,t)}static UNSUCCESS(t){return new i(!1,t)}get getMSG(){return this.message}get isSuccess(){return this.success}}e.Submit=i,i.SUCCESS_CLASS="success",i.UNSUCCESS_CLASS="warn"},728:(t,e)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.ReadFrom=e.WriteIn=void 0,e.WriteIn=(t,e,o)=>{t.setItem(e,o),console.log("Saved: "+e+" - "+o)},e.ReadFrom=(t,e)=>{let o=t.getItem(e);return console.log("Read: "+e+" - "+o),o}},492:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.onClickSubmit=e.Down=e.Up=void 0;const a=o(63),r=o(884);var n;function i(){(0,a.removePopup)(n)}e.Up=function(){n=(0,a.buildPopup)("main"),(0,r.buildForm)().appendTo(n.getHTML),(0,a.showPopup)(n)},e.Down=i,e.onClickSubmit=function(t,e,o,a,n,s){let l=null;if([t,e,o,a,n,s].forEach((t=>{void 0!==t?t.val().trim().length<=0&&(l=new r.Submit(!1,"Поле <"+t.attr("placeholder")+"> - пустое!")):l=new r.Submit(!1,"INNER ERROR")})),null!==l)return l;const c=e.val();if(!c.includes(".")||!c.includes("@"))return new r.Submit(!1,"Поле <"+e.attr("placeholder")+"> - заполнено неправильно!");if(!s.is(":checked"))return new r.Submit(!1,"Нужно согласие с политикой конфиденциальности!");const p=new FormData;p.append("First last name: ",t.val()),p.append("Email: ",e.val()),p.append("Phone: ",o.val()),p.append("Organization: ",a.val()),p.append("Message: ",n.val());const d=JSON.stringify(Object.fromEntries(p));return $.ajax({url:"https://api.slapform.com/rbPLNYL9m",method:"POST",data:d,dataType:"json",success:t=>{if(!t.success)return new r.Submit(!1,"Произошла ошибка при отправке формы на сервер!")},error:t=>403===t.status?new r.Submit(!1,"Ошибка 403: Доступ запрещен при отправке формы на сервер!"):new r.Submit(!1,"Произошла ошибка при отправке формы на сервер!")}),window.setTimeout((()=>{i()}),1500),new r.Submit(!0,"Успешно отправлена форма")}},63:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.PopupInfo=e.buildPopup=e.showPopup=e.removePopup=e.isShown=e.idx=void 0;e.idx="_popup";const a=o(694);function r(t){if($(window).width()<=768)$(t).css({left:"0%",top:"0%",width:"100%",height:"100%"});else{$(t).css({width:"50%",height:"45%"});let e=t.width()/2,o=t.height()/2;$(t).css({left:"calc(50% - "+e+"px)",top:"calc(50% - "+o+"px)"})}}e.isShown=!1,e.removePopup=function(t){!function(t){[t.getHTML,t.getOverlay].forEach((o=>{const r=$(o);let n=parseFloat(r.css("opacity")),i=setInterval((()=>{n-=.01025,r.css({opacity:n}),n<=0&&(window.setTimeout((()=>{e.isShown=!1,t.getHTML.remove(),t.getOverlay.remove(),a.localHistory.replaceState(null,"",window.location.href)}),1500),clearInterval(i))}),1)}))}(t)},e.showPopup=function(t){!function(t){let o=0;t.forEach((t=>{let a=setInterval((()=>{o+=.0075*t.getTarget,$(t.getHTML).css({opacity:o}),o>=t.getTarget&&(e.isShown=!0,clearInterval(a))}),1)}))}([new i(t.getHTML,1),new i(t.getOverlay,.5)])},e.buildPopup=function(t){let o=$("<div>"),a=$("<div>");return o.attr("id",e.idx),o.addClass("popup"),o.addClass("p-2"),a.addClass("overlay"),$(o).css({opacity:0}),$(a).css({opacity:0}),a.appendTo(t),o.appendTo($("#popup_anchor")),r(o),$(window).on("resize",(()=>{r(o)})),new n(a,o,e.idx)};class n{constructor(t,e,o){this.overlay=t,this.html=e,this.idx=o}get getOverlay(){return this.overlay}get getHTML(){return this.html}get getIDX(){return this.idx}}e.PopupInfo=n;class i{constructor(t,e){this.html=t,this.target=e}get getHTML(){return this.html}get getTarget(){return this.target}}},694:(t,e,o)=>{Object.defineProperty(e,"__esModule",{value:!0}),e.localStorage=e.localHistory=void 0;const a=o(492),r=o(63);$((()=>{e.localStorage=window.localStorage,e.localHistory=window.history,function(){let t=$("<input>");t.attr("type","submit"),t.val("Заполнить форму"),t.on("click",(()=>{r.isShown||((0,a.Up)(),e.localHistory.pushState(null,"https://alfabouh.github.io/sv_test8_24gr/formpage/"),e.localHistory.forward())})),$(window).on("popstate",(()=>{e.localHistory.replaceState(null,"",window.location.href),(0,a.Down)()})),t.appendTo($("#greeting"))}()}))}},e={};!function o(a){var r=e[a];if(void 0!==r)return r.exports;var n=e[a]={exports:{}};return t[a](n,n.exports,o),n.exports}(694)})();
